 GNU nano 6.2                                                                    .github/workflows/ci.yml
 1 name: LIMS CI
 2
 3 on:
 4   push:
 5     branches: [ main, feature/** ]
 6   pull_request:
 7     branches: [ main ]
 8
 9 jobs:
10   guardrails:
11     runs-on: ubuntu-latest
12
13     services:
14       postgres:
15         image: postgres:15
16         env:
17           POSTGRES_DB: narolims
18           POSTGRES_USER: postgres
19           POSTGRES_PASSWORD: postgres
20         ports:
21           - 5432:5432
22         options: >-
23           --health-cmd pg_isready
24           --health-interval 10s
25           --health-timeout 5s
26           --health-retries 5
27
28     steps:
29       - uses: actions/checkout@v4
30
31       - name: Set up Python
32         uses: actions/setup-python@v5
33         with:
34           python-version: "3.10"
35
36       - name: Install dependencies
37         run: |
38           python -m pip install --upgrade pip
39           pip install -r requirements.txt
40
41       - name: Run guardrails
42         env:
43           DJANGO_SETTINGS_MODULE: naro_lims.settings
44           DATABASE_URL: postgres://postgres:postgres@localhost:5432/narolims
45         run: |
46           make check
47
