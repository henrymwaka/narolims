{# lims_core/templates/lims_core/landing.html #}
{% extends "lims_core/base_public.html" %}
{% block title %}NARO LIMS{% endblock %}

{% block extra_css %}
  .hero{
    border-radius: var(--radius2);
    border: 1px solid rgba(255,255,255,.14);
    background:
      radial-gradient(600px 260px at 12% 10%, rgba(124,58,237,.30), transparent 60%),
      radial-gradient(600px 260px at 88% 0%, rgba(79,70,229,.22), transparent 60%),
      linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
    box-shadow: var(--shadow);
    overflow: hidden;
    position: relative;
  }
  .hero-inner{
    padding: 26px;
    display:grid;
    grid-template-columns: 1.15fr .85fr;
    gap: 18px;
    align-items: stretch;
  }
  .hero h1{
    margin:0;
    font-size: clamp(28px, 3.2vw, 44px);
    letter-spacing: .2px;
    line-height: 1.08;
  }
  .hero p{
    margin: 12px 0 0 0;
    color: var(--muted);
    max-width: 62ch;
    font-size: 14px;
  }
  .kpis{
    margin-top: 16px;
    display:flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  .kpi{
    padding: 10px 12px;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(0,0,0,.10);
    min-width: 160px;
  }
  .kpi strong{ display:block; font-size: 14px; }
  .kpi span{ display:block; font-size: 12px; color: var(--muted2); margin-top: 4px; }

  .hero-cta{
    margin-top: 16px;
    display:flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .panel{
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.14);
    box-shadow: var(--shadow2);
    overflow:hidden;
    display:flex;
    flex-direction: column;
  }
  .panel-head{
    padding: 14px 14px 12px;
    border-bottom: 1px solid rgba(255,255,255,.10);
    display:flex;
    align-items:center;
    justify-content: space-between;
    gap: 10px;
  }
  .panel-title{
    font-weight: 900;
    font-size: 12px;
    color: rgba(255,255,255,.90);
    letter-spacing: .2px;
  }
  .dots{ display:flex; gap: 6px; }
  .dot{
    width: 10px; height: 10px; border-radius: 99px;
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.10);
  }
  .panel-body{ padding: 14px; }
  .mini-grid{
    display:grid;
    grid-template-columns: 1fr;
    gap: 10px;
  }
  .mini-card{
    border-radius: 16px;
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    padding: 12px;
  }
  .mini-card .top{ display:flex; justify-content:space-between; gap: 10px; align-items:center; }
  .chip{
    font-size: 11px;
    padding: 4px 9px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.10);
    color: rgba(255,255,255,.86);
    white-space: nowrap;
  }
  .mini-card strong{ display:block; font-size: 12px; }
  .mini-card span{ display:block; font-size: 12px; color: var(--muted2); margin-top: 4px; }

  .section{
    margin-top: 18px;
    display:grid;
    grid-template-columns: 1fr;
    gap: 14px;
  }

  .grid{
    margin-top: 14px;
    display:grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 14px;
  }
  .card{
    border-radius: 18px;
    border: 1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.06);
    padding: 16px;
    box-shadow: 0 18px 40px rgba(0,0,0,.25);
    height: 100%;
  }
  .card .top{ display:flex; justify-content:space-between; gap: 10px; align-items:flex-start; }
  .card h3{ margin:0; font-size: 16px; letter-spacing:.1px; }
  .card p{ margin: 8px 0 0 0; font-size: 13px; color: var(--muted); }
  .card ul{ margin: 10px 0 0 18px; color: var(--muted); font-size: 13px; }
  .card .actions{ margin-top: 12px; display:flex; gap: 10px; flex-wrap: wrap; }
  .soft{
    border-radius: 18px;
    border: 1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.05);
    padding: 16px;
  }
  .soft h2{ margin:0; font-size: 16px; }
  .soft p{ margin: 8px 0 0 0; color: var(--muted); font-size: 13px; }
  .steps{
    margin-top: 10px;
    display:grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 12px;
  }
  .step{
    border-radius: 18px;
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(0,0,0,.10);
    padding: 14px;
  }
  .step .n{
    width: 30px; height: 30px; border-radius: 12px;
    display:grid; place-items:center;
    font-weight: 900;
    background: rgba(255,255,255,.08);
    border: 1px solid rgba(255,255,255,.12);
  }
  .step strong{ display:block; margin-top: 8px; font-size: 13px; }
  .step span{ display:block; margin-top: 6px; font-size: 12px; color: var(--muted2); }

  .cta-banner{
    margin-top: 16px;
    border-radius: 22px;
    border: 1px solid rgba(255,255,255,.14);
    background:
      radial-gradient(500px 220px at 10% 20%, rgba(34,197,94,.18), transparent 62%),
      radial-gradient(520px 240px at 90% 10%, rgba(124,58,237,.22), transparent 62%),
      linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
    padding: 18px;
    display:flex;
    align-items:center;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
    box-shadow: var(--shadow2);
  }
  .cta-banner strong{ font-size: 14px; }
  .cta-banner span{ display:block; margin-top: 6px; color: var(--muted); font-size: 13px; max-width: 70ch; }

  @media (max-width: 980px){
    .hero-inner{ grid-template-columns: 1fr; }
    .grid{ grid-template-columns: 1fr; }
    .steps{ grid-template-columns: 1fr; }
  }
{% endblock %}

{% block content %}

<section class="hero">
  <div class="hero-inner">
    <div>
      <h1>Operational discipline for laboratory workflows</h1>
      <p>
        NARO LIMS is built for traceable sample movement, role-aware transitions, and audit-ready records across NARO laboratories. It supports controlled workflow execution, laboratory scoping, and compliance-friendly oversight without slowing routine work.
      </p>

      <div class="kpis" aria-label="Highlights">
        <div class="kpi">
          <strong>Traceability</strong>
          <span>Every step recorded, searchable, and attributable</span>
        </div>
        <div class="kpi">
          <strong>Role-aware actions</strong>
          <span>Permissions mapped to laboratory and responsibility</span>
        </div>
        <div class="kpi">
          <strong>Audit readiness</strong>
          <span>Structured events, timelines, and accountability</span>
        </div>
      </div>

      <div class="hero-cta">
        {% if user.is_authenticated %}
          <a class="btn primary" href="/lims/ui/">Open workspace</a>
          <a class="btn" href="/lims/ui/samples/">View samples</a>
        {% else %}
          <a class="btn primary" href="/api/auth/login/?next=/lims/ui/">Login to workspace</a>
          <a class="btn" href="/lims/features/">Explore features</a>
        {% endif %}
        <a class="btn" href="/lims/docs/">Docs</a>
        <a class="btn" href="/lims/health/">System status</a>
      </div>
    </div>

    <aside class="panel" aria-label="Preview">
      <div class="panel-head">
        <div class="panel-title">Workspace preview</div>
        <div class="dots" aria-hidden="true">
          <div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>
      </div>
      <div class="panel-body">
        <div class="mini-grid">
          <div class="mini-card">
            <div class="top">
              <strong>Sample lifecycle</strong>
              <span class="chip">Controlled</span>
            </div>
            <span>Transitions enforced with gates and role checks</span>
          </div>
          <div class="mini-card">
            <div class="top">
              <strong>Audit timeline</strong>
              <span class="chip">Immutable</span>
            </div>
            <span>Event history captured for review and reporting</span>
          </div>
          <div class="mini-card">
            <div class="top">
              <strong>SLA visibility</strong>
              <span class="chip">Measured</span>
            </div>
            <span>Track turnaround and identify operational bottlenecks</span>
          </div>
        </div>
      </div>
    </aside>
  </div>
</section>

<section class="section">
  <div class="soft">
    <h2>How it works</h2>
    <p>
      The platform is structured around controlled workflow steps, clear ownership, and consistent metadata. It is designed for real labs where accountability must be provable and operational throughput still matters.
    </p>
    <div class="steps">
      <div class="step">
        <div class="n">1</div>
        <strong>Register</strong>
        <span>Create samples, batches, and experiments with traceable identifiers.</span>
      </div>
      <div class="step">
        <div class="n">2</div>
        <strong>Execute</strong>
        <span>Move items through workflow transitions with role and metadata enforcement.</span>
      </div>
      <div class="step">
        <div class="n">3</div>
        <strong>Audit</strong>
        <span>Review timelines, metrics, and logs for compliance and performance.</span>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="soft">
    <h2>Key capabilities</h2>
    <p>
      Below is a quick view of what the system is designed to do well. The feature pages provide deeper detail and examples.
    </p>

    <div class="grid">
      {% if features %}
        {% for f in features %}
          <div class="card">
            <div class="top">
              <h3>{{ f.name }}</h3>
              <span class="chip">{{ f.tag }}</span>
            </div>
            <p>{{ f.summary }}</p>
            <ul>
              {% for b in f.bullets %}
                <li>{{ b }}</li>
              {% endfor %}
            </ul>
            <div class="actions">
              <a class="btn primary" href="/lims/features/{{ f.slug }}/">Learn more</a>
              <a class="btn" href="{{ f.cta_href }}">{{ f.cta_label }}</a>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="card">
          <div class="top">
            <h3>Traceable sample workflows</h3>
            <span class="chip">Core</span>
          </div>
          <p>Register, track, and review sample lifecycles with consistent IDs and history.</p>
          <ul>
            <li>Sample registry and detail views</li>
            <li>Event timelines and audit logs</li>
            <li>Batch operations support</li>
          </ul>
          <div class="actions">
            <a class="btn primary" href="/lims/features/">Explore features</a>
            <a class="btn" href="/lims/ui/samples/">Open samples</a>
          </div>
        </div>

        <div class="card">
          <div class="top">
            <h3>Role-aware execution</h3>
            <span class="chip">Governed</span>
          </div>
          <p>Ensure only the right roles can perform each workflow step and action.</p>
          <ul>
            <li>Laboratory-scoped roles</li>
            <li>Permission matrices</li>
            <li>Transition allowlists</li>
          </ul>
          <div class="actions">
            <a class="btn primary" href="/lims/docs/">Read docs</a>
            <a class="btn" href="/lims/health/">System status</a>
          </div>
        </div>

        <div class="card">
          <div class="top">
            <h3>Audit and metrics</h3>
            <span class="chip">Accountable</span>
          </div>
          <p>Provide provable history and performance visibility for management and compliance.</p>
          <ul>
            <li>Workflow timelines</li>
            <li>Metrics endpoints</li>
            <li>SLA dashboards</li>
          </ul>
          <div class="actions">
            <a class="btn primary" href="/api/schema/swagger-ui/">API schema</a>
            <a class="btn" href="/lims/updates/">Release notes</a>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</section>

<section class="cta-banner" aria-label="Get started">
  <div>
    <strong>Ready to use the workspace?</strong>
    <span>
      Sign in to access the authenticated UI, sample views, and workflow actions. Public pages remain available for documentation and platform overview.
    </span>
  </div>
  <div style="display:flex;gap:10px;flex-wrap:wrap;">
    {% if user.is_authenticated %}
      <a class="btn primary" href="/lims/ui/">Open workspace</a>
      <a class="btn" href="/lims/ui/workflow-demo/">Workflow demo</a>
    {% else %}
      <a class="btn primary" href="/api/auth/login/?next=/lims/ui/">Login</a>
      <a class="btn" href="/lims/docs/">Docs</a>
    {% endif %}
  </div>
</section>

{% endblock %}
